# Foresight Demo

This is an example iOS Application for the Enabyl Foresight framework. The application provides examples of three major functions of the `SwiftyForesight` API:
- [Uploading Data](#uploading-data)
- [Fetching Models](#fetching-models)
- [Generating Predictions](#generating-predictions)

## To Run
To run the application, first install the necessary pods by including `pod SwiftyForesight` in the application's podfile and running `pod install`. All the necessary AWS dependencies are installed by Cocoapods automatically. The application must then be connected to the user's own AWS resources. If an *awsconfiguration.json* file has been provided (or if it has been downloaded from the AWS Mobile Hub), include it in the application bundle. Then update the following lines of code in *ViewController.swift*:
```swift
let identityID = "<your_identity_ID>"   // AWS Identity ID
let writeBucket = "<your_write_bucket>"    // AWS Write Bucket Name
let readBucket = "<your_read_bucket>"   // AWS Read Bucket Name
let tableName = "<your_table_name>"  // AWS DynamoDB Table Name
```
The `identityID`, `readBucket`, and `writeBucket` may be copied from the *awsconfiguration.json* file, and the DynamoDB table name is optional for writing metadata to a DynamoDB database.

## Uploading Data
Data for upload is first generated by tapping the *Generate Data* button. The appliction populates the `LibraData` object with training data and metadata. Once complete, the status text label on the display will change to "Generated Data". Generating data activates the *Upload Data* button, which formats and uploads training data and metadata to AWS resources. When data upload is complete, the status text label will read "Uploaded Data (2)". 

## Fetching Models
The application fetches a generic softmax .mlmodel file from a remote server and compiles it in a `LibraModel` subclass (`FeedforwardModel`) when *Retrieve Model* is tapped. If the user is using an *awsconfiguration.json* file provided by Enabyl, the specified read bucket will contain this file; otherwise, the .mlmodel file is provided in the application bundle if the user is providing their own AWS backend resources. If successful, the status text label will read "Retrieved Model".

## Generating Predictions
Tapping *Generate Predictions* will generate a prediction from the compiled model using generated data. If the model has been compiled correctly, the output of the softmax layer should be fixed to `[0, 0, 1]`. The application checks that the generated output matches this expectation -- if the expectation is met, the status label will read "Generated Predictions"; else, it will read "Error Generating Predictions".
